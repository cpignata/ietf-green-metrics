<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>
<?rfc comments="yes"?>
<?rfc compact="no"?>
<?rfc inline="yes"?>
<?rfc sortrefs="yes"?>
<?rfc subcompact="no"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="5"?>
<?rfc tocindent="yes"?>
<?rfc tocompact="yes"?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" category="info" docName="draft-cx-opsawg-green-metrics-00" ipr="trust200902" obsoletes="" updates="" submissionType="IETF" xml:lang="en" sortRefs="true" symRefs="true" tocInclude="true" tocDepth="5" version="3">
  <!-- xml2rfc v2v3 conversion 3.16.0 -->
  <front>
    <title abbrev="">Green Networking Metrics</title>
    <seriesInfo name="Internet-Draft" value="draft-cx-opsawg-green-metrics-00"/>
    <author fullname="Alexander Clemm" initials="A." surname="Clemm">
      <organization>Futurewei</organization>
      <address>
        <postal>
          <street>2220 Central Expressway</street>
          <city>Santa Clara</city>
          <country>USA</country>
          <code>CA 95050</code>
        </postal>
        <phone/>
        <email>ludwig@clemm.org</email>
      </address>
    </author>
    <author fullname="Lijun Dong" initials="L" surname="Dong">
      <organization>Futurewei</organization>
      <address>
        <postal>
          <street>2220 Central Expressway</street>
          <city>Santa Clara</city>
          <country>USA</country>
          <code>CA 95050</code>
        </postal>
        <email>lijun.dong@futurewei.com</email>
      </address>
    </author>
    <author fullname="Greg Mirsky" initials="G" surname="Mirsky">
      <organization>Ericsson</organization>
      <address>
        <email>gregimirsky@gmail.com</email>
      </address>
    </author>
    <author fullname="Laurent Ciavaglia" initials="L" surname="Ciavaglia">
      <organization>Nokia</organization>
      <address>
        <email>laurent.ciavaglia@nokia.com</email>
      </address>
    </author>
    <author fullname="Jeff Tantsura" initials="J" surname="Tantsura">
      <organization>Nvidia</organization>
      <address>
        <email>jefftant.ietf@gmail.com</email>
      </address>
    </author>
    <author fullname="Marie-Paule Odini" initials="M-P" surname="Odini">
      <address>
        <email>mp.odini@orange.fr</email>
      </address>
    </author>
    <author fullname="Eve Schooler" initials="E" surname="Schooler">
      <address>
        <email>eve.schooler@gmail.com</email>
      </address>
    </author>
    <author fullname="Ali Rezaki" initials="A" surname="Rezaki">
      <organization>Nokia</organization>
      <address>
        <email>ali.rezaki@nokia.com</email>
      </address>
    </author>
    <date day="16" month="June" year="2023"/>
    <abstract>
      <t>
    This document explains the need for network instrumentation that allows to assess the power consumption, energy efficiency, and carbon footprint associated with a network, its equipment, and the services that are provided over it. It also suggests a set of related metrics that, when provided visibility into, can help to optimize a network's "greenness" accordingly.  
      </t>
    </abstract>
  </front>
  <middle>
    <section anchor="intro" numbered="true" toc="default">
      <name>Introduction</name>
      <t>
Climate change and the need to curb greenhouse emissions have been recognized 
by the United Nations and by most governments as one of the biggest and most urgent challenges of our time <xref target="unipcc2023" format="default"/>.  
As a result, reducing carbon footprint is becoming of 
increasing importance for society and all industries.  The networking industry is no 
exception.   
</t>
<t>
Networks themselves consume significant amounts of energy and thus contribute to greenhouse emissions. Therefore, the networking industry has an important role to play in meeting sustainability goals. Future networking advances will increasingly need to focus on becoming more sustainable and reducing carbon footprint, both for economic reasons and for reasons of corporate responsibility. Those advances will focus first and foremost on greater energy efficiency, but not be limited to that.  Other factors include consideration for how power is being sourced (e.g. carbon versus solar based), considerations for the lifecycle of hardware (e.g. software versus forklift upgrades), and considerations related to deployments (for example, minimizing the "energy tax" associated with heating or cooling of networking devices).  This shift has already begun and sustainability is well on its way towards becoming an important concern for network providers <xref target="telefonica2021" format="default"/>.   
</t>
<t>There are many vectors along which networks can be made "greener". At its foundation, it involves network equipment itself. For example, making such equipment more energy-efficient is a big factor in helping networks become greener.  However, opportunities also exist at the level of protocols themselves (e.g. reduction of transmission waste and enabling of rapid control loops), at the level of the overall network (e.g. path optimization under consideration of energy efficiency as a cost factor), and architecture level (e.g. placement of contents and functions) <xref target="I.D.draft-cwx-green-ps" format="default"/>.  
</t>
<t>
Regardless of any particular approach that is chosen, in order to assess its impact, there is a need to have visibility. For example, techniques that attempt to minimize energy consumption may need visiblity into the actual energy consumption that is occurring in a network and to ideally be able to attribute that consumption to what is causing it.  As the adage goes, you cannot manage what you cannot measure. By extension, you cannot optimize what you have no visibility of.  The ability to instrument networks in a way that allows for the assessment of factors related to a network's environmental footprint is hence an important enabler for potential optimizations that help to reduce that footprint. Not only does it allow to assess the effectiveness of measures that are being taken, it also enables (for example) control loops based on those factors. Before instrumenting, it needs to be clear, however, what the proper metrics are that network providers will be interested in and that applications will seek to optimize.  
</t>
<t>
This document defines a set of metrics that allow to assess the "greenness" of networks and that form the basis for optimizing energy efficiency, carbon footprint, and environmental sustainability of networks and the services provided.  These metrics are intended to serve the foundation for possible later IETF standardization activities, such as the definition of related YANG modules <xref target="RFC7950" format="default"/> or energy-related control protocol extensions. It should be noted that the metrics introduced here are not intended to be used to manage applications such as Power over Ethernet, requirements and instrumentation for which have been defined in other contexts (e.g. <xref target="RFC6988" format="default"/><xref target="RFC7460" format="default"/>).
</t>
      <t> Please note that throughout this document, we will be using the terms "green", "sustainable", and "carbon footprint reduction" interchangeably. Ultimately, the goal is to reduce (and as far as possible avoid) the emission of greenhouse gases when operating networks while continuing to provide communication services that meet user demands.  Emission of greenhouse gases is generally caused by methods to generate energy that is used to power devices (as well as production process for the manufacturing of networking equipment or to heat, cool, light buildings that house networking equipment).  Within this context, we will focus for the most part on energy efficiency and use that term synonymously with "energy utilization efficiency", broadly speaking referring to the efficiency with which energy is being utilized.  Energy efficiency contributes to reducing greenhouse gas emission by minimizing the amount of required energy, not all of which might be sourced sustainably.  Other contributing factors that will be touched upon include, for example, the greenness of the energy source (such as solar versus fossil-based) or the carbon that is embedded within a device.  It should be noted that due to those other contributing factors, energy efficiency and carbon efficiency are not identical <xref target="Shenoy2022" format="default"/>.</t>
    </section>
    <section numbered="true" toc="default">
      <name>Definitions and Acronyms</name>
      <ul empty="true" spacing="normal">
        <li>Carbon footprint: as used in this document, the amount of carbon emissions associated with the use or deployment of technology, usually directly correlated with the associated energy consumption</li>
        <li>Conversion Metric: A type of derived metric that can be calculated from a single other metric by applying a conversion formula</li>  
        <li>CPU: Central Processing Unit</li>
        <li>Derived Metric: A metric whose value depends on other metrics from which it can be computed (or "derived")</li>
        <li>DSF: Deployment Sustainability Factor, a factor to weigh power consumption in a way that reflects also the power consumption of the overall deployment including non-network equipment such as cooling.  </li>
        <li>IPFIX: IP Flow Information eXport</li>
        <li>MTU: Maximum Transmission Unit </li>
        <li>Primary Metric: A metric that needs to be measured, i.e. that cannot be computed from other metrics or factored </li>
        <li>PSF: Power Sustainability Factor (PSF), a factor used to weigh power consumption against the cleanliness of the underlying power source</li>
        <li>SDN: Software-Defined Networking</li>
        <li>ST: Sustainability Tax, a factor applied to "raw" power consumption metrics in order to account for factors such as the sustainability of power sources in order to arrive a number that reflects more closely the "true" contribution to carbon footprint.</li>
        <li>TCAM: Ternary Content-Addressable Memory</li>
        <li>VM: Virtual Machine</li>
        <li>VNF: Virtual Network Function</li>
        <li>Wh: Watt hour</li>
        <li>pWh: pico Watt hour</li>
        <li>kWh: kilo Watt hour</li>
      </ul>
    </section>
    <section numbered="true" toc="default">
      <name>Green Metrics</name>
      <t>
In the following, we categorize green metrics according to the subject of the metrics, as follows:
</t>
      <ul spacing="normal">
        <li>At the device/equipment level.  This concerns aspects such as energy consumption of a device as a whole, of equipment components such as line cards or individual ports.  It includes metrics that would, for example, be found in equipment data sheets. </li>
        <li>At the flow level.  This concerns metrics that can be attributed to flows. For example, this includes metrics that attribute a device's share of its carbon footprint to a given flow, or metrics that aggregate energy consumption of packets across the flow. </li>
        <li>At the path level.  These metrics attest to the end-to-end carbon footprint of paths, reflecting for example the amount of energy drawn when the path is selected, taking into account the energy efficiency and sustainability ratings of path segments across the path.</li>
        <li>At the network level. These metrics aggregate sustainability metrics across a network to provide a holistic picture of the "network as a system".  For example, this includes energy consumed by the network as a whole and may account also for aspects such as the overall energy mix. </li>
      </ul>
      <t>
The green metrics that are defined are mostly comprised of energy metrics, as required to assess and optimize various aspects of energy consumption and efficiency.  
However, those energy metrics are complemented by certain other metrics, for example metrics that account for the sustainability of the energy source (where known).  
</t>
<t>
We furthermore distinguish between primary metrics which are directly measured, and derived metrics which are computed from multiple factors.  For example, a primary metric might be the power consumption of a device, while a derived metric might be a metric that relates energy consumption to utility provided, for example power consumption per gB of traffic passed.  In general, instrumentation will focus on primary metrics that need to be measured where they occur, while derived metrics can be computed from other metrics.   
</t>
<t>
A special case of derived metrics are conversion metrics which are based on conversion from other metrics by some factor.  An example would be metrics that convert energy use into carbon footprint, using a formula to compute emitted CO2 based on energy use using some factor.  Another example would involve the use of sustainability factors that reflect the energy mix used to power a given piece of equipment, resulting in metrics reflecting discounted energy use based on those factors.  
</t>
<section numbered="true" toc="default">
        <name>Metrics related to Equipment</name>
        <section numbered="true" toc="default">
          <name>Energy Consumption Metrics</name>
          <t>
Arguably the most relevant green metrics relate to equipment.  After all, power is drawn from devices.  
</t>
          <t>
The power consumption of the device can be divided into the consumption of the core components (e.g., the backplane and CPU) as well as additional consumption incurred per port and line card. In <xref target="I.D.draft-manral-bmwg-power-usage" format="default"/>, the device factors affecting power consumption are summarized: base chassis power, number of line cards, number of active ports, port settings, port utilization, implementation of packet classification of Ternary Content-Addressable Memory (TCAM) and the size of TCAM, firmware version. 
</t>
          <t>
Furthermore it is important to understand the difference between power consumption when a resource is idling versus when it is under load. This helps to understand the incremental cost of additional transmission versus the initial cost of transmission. 
Generally, the cost of the first bit could be considered very high, as it requires powering up a device, port, etc.
The cost of transmission of additional bits (beyond the first) is many orders of magnitude lower. Likewise, the incremental cost of CPU and memory that will be needed to process additional packets becomes fairly negligible.
</t>
          <t>
The first set of metrics corresponds to energy ratings of the device.  Such metrics can be useful for purposes such as planning of network deployments or optimization of configuration of paths.  They also provide a good proxy to model expected actual energy use in a network.   
</t>
          <ul spacing="normal">
            <li>Power consumption when idle (e.g. Watts)</li>
            <li>Power consumption when fully loaded (e.g. Watts)</li>
            <li>Power consumption at various loads: e.g. power consumption at 50% utilization, power consumption at 90% utilization </li>
          </ul>
<t> These metrics should be maintained for the device as a whole, and for the subcomponents, i.e.: 
</t>
          <ul spacing="normal">
            <li>For the chassis by itself</li>
            <li>For each line card</li>
            <li>For each port</li>
          </ul>
          <t>
  They should also take into account aspects such as the current memory configuration, as the overall energy consumption of a device is a function of the energy consumption of the components that make up the system.  
</t>
 <t>The metrics would not necessarily need to be instrumented as they could be provided by the data sheet associated with the device or they could be measured in a test lab or as part of a deployment.  For maximum accuracy and comparability, they should reflect pre-defined environmental setting, e.g., operating temperature, relative humidity, barometric pressure. For example, ATIS (Alliance for Telecommunications Industry Solutions) <xref target="ATIS0600015.02" format="default"/>  defines a reference environment under which to measure router power consumption: temperature of 25 celsius degree (within 3 celsius degree deviation), relative humidity of 30% to 75%, barometric pressure between 1020 and 812 mbar. In the AC power configuration, the router should be evaluated at 230 VAC or within 1% deviation, 50 or 60 Hz or within 1% deviation <xref target="Ahn2014" format="default"/>.  
</t>
<t>Please note that such metrics should ideally be certified. (See also Section <xref target="certification" format="default"/>.)</t>
<t>
The second set of metrics are primary metrics that reflect the actual power being drawn during operation.  It is the type of data that might be provided as management data.  Possible uses include accounting for actual power usage and comparing actual with expected consumption to refine and calibrate consumption models. Again, metrics should be provided for the device as a whole, as well as for the subcomponents reflected in the device hierarchy: line cards, ports, etc. 
</t>
          <ul spacing="normal">
            <li>Current power consumption (e.g. Watts) 
</li>
            <li>Power drawn since system start (or module insertion, if at the level of a line card, or port activation, if at the level of a port), for the past minute (e.g. Watt hours) </li>
          </ul>
<t>
The third set of metrics is a set of derived metrics that are derived from the earlier metrics.  They normalize the power consumption relative to the line speeds respectively to the amount of traffic that is being passed. Rather than assessing absolute power consumption, they relate power consumed to functionality provided in order to provide measures of efficiency, for use by applications that aim to optimize efficiency.  These metrics might be computed by devices themselves or computed after the fact by controllers or managing systems that collect the underlying primary metrics.    
</t>
          <ul spacing="normal">
            <li>Current power consumption / kB (or gB)</li>
            <li>Current power consumption / packet </li>
          </ul>
          
<t>It should be noted that efficiency metrics are not without controversy, as the amount of traffic may not be reflective of the actual utility being derived by users of communication services.  Volume of traffic or number of packets by itself is in many cases not indicative of such utility.  Where feasible, it makes sense to complement these basic efficiency metrics with more refined efficiency metrics that take the utility delivered to applications better into account, such as power consumption per minute of video delivered. Such metrics may be more meaningful to users of services, at the same time they may be harder to assess since dependent also on other application-specific factors (such as supported codecs), depend on specifics of a particular application of which the network may not be aware, and not reflect the actual mix of applications being used.   
</t>
<t>
The fourth set of metrics reflects expectation values about incremental energy usage.  These metrics could be relevant for use cases that assess the cost of additional traffic. <xref target="Bolla2011" format="default"/> and <xref target="Ahn2014" format="default"/> found that incremental power consumption (between baseline power usage at idle and full utilization) of a router is in direct proportion of the link utilization as well as the packet sizes. <xref target="Petrescu2010" format="default"/> suggests using MTU-sized packets as a reference for energy usage.  (It should be noted that incremental energy use for additional packets is different from the earlier metric of current power consumption per packet, which equally allocates power consumption among all packets being passed.) 
</t>
          <ul spacing="normal">
            <li>Incremental power per MTU-sized packet (possible units might be pJ - pico Joules)</li>
            <li>Incremental power per gB </li>
          </ul>
          
        </section>
        <section numbered="true" toc="default">
          <name>Green Metrics Beyond Energy Consumption</name>
          <t>In addition to consumption metrics, it is conceivable to also have the device reflect other context of relevance.  An important aspect concerns the device's power source. In most cases, devices will be agnostic to the power source and depend on the specific deployment. Nonetheless, for a holistic picture, it makes sense to have the "greenness" of the device power source reflected.  This can occur, for example, via a sustainability rating of the power source. This sustainability rating might reflect sustainability on a scale ranging from  diesel-generator powered, powered via conventional power grid, to powered via renewable  energy (powered by windmill, capture of excess heat, etc.).  It may be possible to obtain such a rating from the energy operator and (if not attributable to a single source) reflect the operator's mix of energy sources.  In some cases the sustainability rating might vary with time: over long periods, as a network operator's energy mix becomes more sustainable, as well as over short periods, for example in the case of solar-powered devices backed up by energy drawn from the grid.  
</t>
          <t>Also, the environmental context of the device could be taken into consideration, such as whether it is deployed in a data center and its share in contributing to the need for cooling. It is conceivable to, for example, introduce corresponding metrics that attribute a share of the general power consumption of the network as a whole to the device, including of the environment that the device is deployed in (such as power drawn by the building that houses the device) - an "energy tax" to be attributed to the device, so to speak.  In combination with a factor associated with a device's power sustainability rating, this can result in an overall "pollution factor" that allows to better assess the true contribution that a device is making on carbon footprint.  Weighing energy use by a pollution factor, resulting in pollution-aware networking, has been proposed in the literature as a more appropriate approach to sustainable networks than mere energy-aware networking <xref target="Hossain2019" format="default"/>.  
</t>
          <t> Accordingly, as metrics, the following are being proposed: 
</t>
          <ul spacing="normal">
            <li> Power Sustainability Factor (PSF).  This factor reflects the sustainability of the energy mix that is used to power the device. When multiplied with actual power consumption, it can provide a "weighted" power consumption that accounts for (for example) the portion of energy that is renewable. </li>
            <li> Deployment Sustainability Factor (DSF).  This factor reflects a factor to attribute a share of a deployment's overall power consumption (beyond that directly caused by networking devices) to individual network devices. </li>
          </ul>
          <t>
          It should be noted that it is possible for these factors to fluctuate with time.  For example, a solar-powered device backed up by the electrical grid may exhibit a different PSF depending on factors such as time-of-day, battery status, and weather.  In many cases they will represent merely approximations.  In general, they may also not be measured but assigned by network providers, e.g. provisioned on a device.  As a result, they should be considered as a tool that can be used to refine sustainability optimizations in a network, but not be misconstrued as a measure of absolute truth regarding actual greenness of a device.  
          </t>
          <t>It is conceivable to use PSF and DSF to weigh other energy consumption metrics in order to better express actual carbon contribution. (The above caveats regarding those factors apply, as well as the caveat to caution against relying solely on weighted metrics which heavility depend on choice of underlying factors which could be misused to lead to misleading results.)  Corresponding metrics are easy to derive by applying PSF and/or DSF as a multiplication factor to the energy consumption metric.  Doing so will result in metrics such as the following:
</t>
          <ul spacing="normal">
            <li> Current Sustainability-Weighed Power Consumption </li>
            <li> Current Sustainability-Weighed Power Consumption / gB </li>
            <li> Incremental Sustainability-Weighed Power Consumption / MTU-sized packet </li>
            <li> etc. </li>
          </ul>
          <t> As an option, it is conceivable to convert these metrics into approximate CO2 emission metrics using some formula to calculate the CO2-equivalent required to generate sustainability-weighted power.  It is possible to define a corresponding set of conversion metrics.  (It should be noted that CO2 is of course not the only greenhouse gas, but the one that is most broadly recognized.) </t>
        </section>
        <section numbered="true" toc="default">
          <name>Virtualization Considerations</name>
          <t>
Instrumentation should also take into account the possibility of virtualization. This is important in particular as networking functions may increasingly be virtualized and hosted (for example) in a data center.  Overlay networks may be formed.  Likewise, many applications expected to optimize energy consumption may be hosted on controllers and applied to soft switches, VNFs (Virtual Network Functions), or networking slices.  The attribution of actual power consumed to such virtualized entities is a non-trivial task.  It involves navigating layers of indirection to assess actual energy usage and contribution by individual entities. While it would be possible in such cases to simply revert to energy metrics of CPUs and data centers as a whole, this loses the ability to account for those metrics on the basis of networking decisions being made. 
</t>
          <t>For example, virtualized networking functions could be hosted on containers or virtual machines which are hosted on a CPU in a data center instead of a regular network appliance such as a router or a switch, leading to very different power consumption characteristics. A data center CPU could be more power efficient and consume power more proportionally to actual CPU load. Virtualization could result in using fewer servers. <xref target="Energystar" format="default"/> reports that one watt-hour of energy savings at the server level results in roughly 1.9 watt-hours of facility-level energy savings by reducing energy waste in the power infrastructure and reducing energy needed to cool the waste heat produced by the server. Of course, there are other tradeoffs to consider.  For example, hosting certain functions at the edge instead of the core may result in nominally higher carbon footprint when viewed purely from the hosting infrastructure perspective.  However, it may decrease a network's carbon footprint overall due to a reduction in long-distance traffic.  
</t>
          <t>
Instrumentation needs to reflect the reality that virtualization can occur and facilitate attributing power consumption in a correct manner.  Ideally, the previously defined green metrics should be transposed into equivalent virtual energy metrics.  The instrumentation of virtual energy metrics involves the attribution of energy consumption and carbon footprint of real-world hosting infrastructure to individual virtual functions that run on top of that infrastructure.  Doing so accurately may involve challenges.  However, equivalent capabilities have been defined before in the context of cloud services running in data centers.  In that context, metrics have been proposed that attribute power usage to Virtual Machines (VM) and allow to distinguish furthermore between idle VMs (to determine waste), and all VMs (allowing to determine the ratio of overall power consumed that is truly wasted) <xref target="vmWare2022" format="default"/>.   
As an alternative, 
a simpler solution may be to simply forgo energy metrics for virtualized functions entirely, instead focus on instrumenting and relying on optimizing the energy footprint of the underlying hosting infrastructure. 
</t>
        </section>
      </section>
      <section numbered="true" toc="default">
        <name>Green Metrics related to Flows</name>
        <t>Green metrics related to flows attempt to capture the contribution of a given flow to carbon footprint.  In its basic incarnation, those metrics reflect the energy consumption at a given device.  They could be used in conjunction with IPFIX <xref target="RFC7011" format="default"/> and modeled as Information Elements to be treated analogous to other flow statistics <xref target="RFC7012" format="default"/>. The following is a corresponding set of flow energy metrics at a device:
</t>
        <ul spacing="normal">
          <li>
            <t>Amortized energy consumed over the duration of the flow.  
</t>
            <t>
This is the portion of the flow's energy consumption for the duration of the flow, effectively computed by computing the proportion of flow traffic to overall traffic and multiplying it with the total energy consumption incurred by the device during that time.  </t>
          </li>
          <li>
            <t>Incremental energy consumed over the duration of the flow. 
</t>
            <t>
This is the incremental energy consumption that is directly caused by the flow, representing the difference between the amount of energy consumed with the flow and the amount of energy that would have been consumed without the flow.  (It should be noted that this metric may be difficult to assess in practice.)</t>
          </li>
        </ul>
        <t>A second set of metrics related to flow might aggregate the flow's impact on carbon footprint over the entire flow path.  In that case, flow metrics observed at individual systems are added up along the systems of the traversed path. However, in practice, this will be much more difficult to assess with reasonable accuracy for many reasons.  These reasons include the impact of load balancing, PREOF (Packet Replication, Elimination, and Ordering Functions <xref target="RFC8655" format="default"/>) which may lead to replicated packets for certain segments of a path which still need to be attributed to the flow.  The same is true for packet loss, as lost packets may also contribute to the energy equation. The carbon contribution of those packets until they were dropped as well as their retransmission still needs to be attributed to their respective flow.  A third challenge concerns the ability to trace actual routes taken by production traffic. On top of that, there is the issue that other systems are involved at lower layers whose contribution to carbon footprint may not be accounted for.  For these reasons, any metrics that are provided will need to come with corresponding disclaimers as applicable.  
</t>
        <t> Analogous to equipment metrics, metrics related to energy consumption can further be weighted with PSF and ST to better reflect their actual contribution to carbon footprint.  
</t>
      </section>
      <section numbered="true" toc="default">
        <name>Energy Metrics related to Paths</name>
        <t>
Energy metrics related to paths involve assessing the carbon footprints of paths and optimizing those paths so that overall footprint is minimized, then applying techniques such as path-aware networking <xref target="I.D.draft-chunduri-rtgwg-preferred-path-routing" format="default"/> or segment routing <xref target="RFC8402" format="default"/> to steer traffic along those paths that are deemed "the greenest" among alternatives.  It also includes aspects such as considering the incremental energy usage in routing decisions, as has been suggested in proposals for energy-aware and pollution-aware networking <xref target="Hossain2019" format="default"/>. 
</t>
        <t>Optimizing cost has a long tradition in networking; many of the existing mechanisms can be leveraged for greener networking simply by introducing energy footprint as a cost factor. Low-hanging fruit includes the inclusion of energy-related parameters as a cost parameter in control planes, whether distributed (e.g. IGP) or conceptually centralized via SDN controllers. 
</t>
        <t>
In addition to power consumption over a path itself, other factors such as paths involving intermediate routers that are powered by renewable energy resources might be considered, as might be determined by an aggregate sustainability score. After all, paths with devices that are powered by solar, wind, or geothermal might be preferable over paths involving devices powered by conventional energy that may include fossil fuel or nuclear resources. 
</t>
        <t>
The following are a corresponding set of candidate metrics:
</t>
        <ul spacing="normal">
          <li>Energy rating of a path.  (This could be computed as a function of energy ratings or PSFs of different hops along the path. For example, it could be the maximum PSF of any path segment (to avoid use of any path segments deemed particularly "dirty"), or the sum of PSFs across all path segments (to reflect the "true cost" of the path in its entirety), or the the average PSF of path segments.) </li>
          <li>Current power consumption across a path.  (This could be computed by aggregating the current power per packet (or per kB etc) of each of the hops along the path.)</li>
          <li>Incremental power for a packet over a path.  (This could be computed by aggregating the incremental power per packet of each of the hops along the path.) </li>
        </ul>
        <t> Similar to some of the flow-related metrics, some caveats apply with regards to challenges in capturing all contributors to carbon footprint along a path.  Specifically, it may be challenging to account for the contribution of systems at lower layers to the metrics of the path. 
</t>
      </section>
      <section numbered="true" toc="default">
        <name>Energy Metrics related to the Network-at-Large</name>
        <t>Ultimately, the goal of energy optimization and reduction of carbon footprint is to minimize the aggregate amount of energy used across the entire network, as well as to minimize the overall carbon footprint of the network as a whole. Accordingly, metrics that aggregate the energy usage across the network as a whole are needed.  In order to account for changing traffic profiles, growth in user traffic etc, additional metrics are needed that normalize the total over the volume of services supported and volume of traffic passed.  Corresponding metrics will generally be computed at the level of Operational Support Systems (or Business Support Systems) for the entire network.  </t>
        <t>Some of the metrics used include the following <xref target="telefonica2021" format="default"/>:
</t>
        <ul spacing="normal">
          <li>Total energy consumption (MWh)</li>
          <li>Electricity from renewable sources (%)</li>
          <li>Network energy efficiency (MWh/PB)</li>
        </ul>
      </section>
    </section>
    <section numbered="true" toc="default">
      <name>Other considerations</name>
      <t>
This document is intended to spark discussion about what metrics will be useful to reduce the carbon footprint of networks - that provide visibility into energy consumption, that help optimization of networks under green criteria, that enable the next generation of energy-aware controllers and services.  Clearly, other metrics are conceivable and more considerations apply beyond those that are reflected in earlier sections of this document. The following subsections highlight some of those items.  
</t>
      <section numbered="true" toc="default">
        <name>User perspective</name>
        <t>Arguably, attributing energy usage to individual users and making users aware of the sustainability implications of their communication behavior may provide interesting possibilities to reduce environmental footprint by guiding their behavior accordingly. For example, the network could present clients with energy and carbon statistics related to their communication usage. This could be supported by metrics related to service instances, such as energy usage statistics beyond statistics regarding volume, duration, number of transactions. Such approaches would raise questions about how to actually collect such statistics accurately (versus just computing them via a formula) or what to actually include as part of those statistics (amortized vs incremental energy contribution, attribution of cost for path resilience or retransmissions due to congestion, etc).  They also raise questions about how they would in practice be used.  For example, energy-based charging might be explored as an alternative for volume-based charging to incentivize carbon-conscious networking use. However, in practice the two may be strongly correlated and rejected by customers for similar reasons that volume-based charging is frequently rejected.  </t>
      </section>
      <section numbered="true" toc="default">
        <name>Holistic perspective</name>
        <t>
The network itself is only one contributor to a network's carbon footprint.  Arguably just as important are aspects outside the network itself, such as cooling and ventilation.  These aspects need to be taken into account as part of a holistic perspective.  However, reflecting such aspects in detail would arguably result in "boiling the ocean" and are therefore not further addressed here.
</t>
        <t>
That being said, clearly the carbon footprint and energy consumption of a network as a whole will include non-negligible contributions of devices beyond actively-managed networking equipment such as routers or switches.  As a result, the sum of metrics contributed across all networking equipment may not reflect the total of the network as a whole.  In order to account for the contribution respectively carbon overhead of those hidden devices, one straightforward way is to introduce a metric that provides the ratio of the sum of the known contributions of devices versus the contribution of the network as a whole. Such a metric can subsequently be factored in as an additional "carbon tax" for other metrics where desired and appropriate.   
</t>
      </section>
      <section numbered="true" toc="default">
        <name>Sustainable equipment production</name>
        <t>Internet energy consumption and associated carbon footprint may comprise two major components <xref target="Raghavan2011" format="default"/>: (1) the energy of the devices that construct the Internet, including the infrastructure devices: routers, LAN devices, cellular and telecommunication infrastructure, (2) More broadly, with the rise of peer-to-peer applications and cloud services, it also considers the energy consumption of the end systems, including desktops, laptops, smart phones, cloud servers, and application servers that are not in the cloud. 
</t>
        <t>
For those two components, the following factors need to take into consideration for energy consumption calculation:
</t>
        <ul spacing="normal">
          <li> Energy consumed in manufacturing of the devices and end-systems, as well as the contribution from their components and materials. This constitutes the embodied carbon footprint of the device. It is conceivable to amortize embodied carbon footprint over the lifetime of the device.</li>
          <li>The replacement lifespan of the devices and end-systems: desktops and laptops are typically replaced in 3-4 years, smartphones in 2 years, application servers and cloud servers in 3 years, routers and WiFi-LAN switches in 3 years, cellular towers and telecommunication switches in 10 years, fiber optics in 10 years, copper in 30 years, etc. With the incremental growth rate of the technology advancement, the replacement lifespan might decrease over time. </li>
          <li> Operational maintenance: the network would not be functional without various software and implementation of protocols. The energy consumed in creating software is complicated because it is overwhelmingly human involved, which usually include the energy used for the facilities of the software companies and human energy of the programmers. </li>
          <li> Replacement: The energy consumed in replacement of devices and end-systems could vary. Some could be very energy intensive for those large devices, e.g., cellular towers, or environmental unfriendly equipment, such as submarine communication cables.</li>
          <li> Disposal: There is substantial energy cost in disposing and recycling the old devices and equipment. </li>
        </ul>
        <t>
By combining the energy consumption for running each device that builds the Internet <xref target="JuniperRouterPower" format="default"/>, and the energy consumption of the end systems, in the meantime counting the energy consumption of manufacturing, operational maintenance, replacement and lifespan, disposal of those devices and equipment, we may have an estimate of the energy consumption for the network as a whole.
</t>
      </section>
      <section numbered="true" toc="default">
        <name>Dealing with imprecision and uncertainty</name>
        <t>
In some cases, it may be difficult to determine the values of metrics precisely.  This may be due to, for example, limitations of instrumentation and/or the fact that consumption of energy (for example) is neither constant nor linear but adheres to more complex functions.  In those cases, it may be advisable to allow for a way to express metrics in ways that allow to reflect a degree of uncertainty.  For example, power consumption can be addressed not as a single value but as a range defined by an upper and lower bound, as suggested e.g. in <xref target="Petrescu2010" format="default"/> for the expression of power consumption of links.  
</t>
      </section>
      <section anchor="certification" numbered="true" toc="default">
        <name>Certification</name>
        <t>Some of the metrics that are mentioned in this document may be difficult to assess and verify in practice, such as sustainability ratings or device power ratings. As far as these metrics are used to optimize the sustainability of network deployments, special consideration needs to be given to ensure that those metrics are indeed reflected correctly and accurately. Decisions that are based on incorrect assumptions and data may lead to ineffective or even counterproductive courses of actions. Where assessment and specifically verification of certain metrics are difficult, solution approaches that involve certification of those metrics (for example, of sustainability ratings) by a trusted authority could be considered. 
</t>
      </section>
      <section anchor="priorart" numbered="true" toc="default">
      <name>Green metrics defined elsewhere</name>
      <t>Other standardization organization have considered sustainability of networking as well.  Notably, this includes the ETSI Technical Committee on Environmental Engineering (TC EE), which has producing standards relating to the measurement of energy efficiency of various network elements and network segments <xref target="ETSI203228" format="default"/><xref target="ETSI202706-1" format="default"/><xref target="ETSI202706-2" format="default"/><xref target="ETSI303215" format="default"/><xref target="ETSI203184" format="default"/><xref target="ETSI203136" format="default"/>.  Specifically, this includes metrics regarding the power consumption and energy efficiency of network equipment, particularly in mobile networks but also more generally in fixed access and transport and IP networks.  
      </t>
      <t>
      Beyond energy consumption metrics for equipment, these standards also specify certain other aspects such as performance and efficiency metrics related to data volume, mobile network coverage, and latency, as well as measurement and extrapolation methodologies. While some of these aspects exceed the scope of the document here, we expect these standards to provide a good reference point for the definition of metrics related to the energy efficiency metrics.        
      Future revisions of this document will therefore consider which of those metrics make sense to adopt here, pending further analysis. 
      </t>
      </section>
    
    </section>
    <section anchor="controversies" numbered="true" toc="default">
       <name>Controversies</name>
       <t>
       There are many ways in which the metrics defined in this document can be used.  One of those uses includes assessment of the "greenness" of networks, as the metrics presented here allow (among other things) to gauge progress over time as well as define benchmarks used for comparison.  Another important use includes the ability to use those metrics for optimizing the network, enabling (for example) feedback loops that observe the outcomes of configuration measures taken and conduct subsequent tweaks with the goal of improving those outcomes.    
       </t>
       <t>
       One problem with selecting any particular metric concerns that it can be "gamed", painting a distorted picture in which, while one metric may look great, the same may not be true for the overall sustainability outcome.  For example, only looking at total energy consumption of a network as a whole misses the fact how much utility was provided by the network overall.  Deployments may grow over time, traffic mix changes, all of which will impact the metric without being self evident. Similarly, looking only at efficiency metrics such as power consumption / gB may not take into account of the embedded carbon footprint of a forklift upgrade that may offset smaller nominal efficiency gains. Similarly, gB by themselves are not a comprehensive measure for utility, which would include also other factors such as service levels delivered or actual goodput achieved.    
       </t>
       <t>
       However, controversies surrounding the use of individual metrics in isolation can be mitigated by providing a basket of metrics that collectively provide a more nuanced picture.  Similarly, the context in which metrics are used plays an important role to not be ignored.  Is a particular metric used as a basis for promotional material to greenwash a network provider's operations, possibly as the only metric?  Or is it used by the same provider as one of many metrics used to assess progress achieved in their network over time?     
       </t>
       <t>
       The stance taken in this document is therefore:
       </t>
       <ul spacing="normal">
         <li>No individual metric defined in this document paints a comprehensive picture by itself.  Instead, metrics are defined to complement one another, and generally speaking multiple metrics should be used in combination to result in a more holistic picture and lead to more representative outcomes.  </li>
         <li>Care should be taken when using individual metrics for comparison purposes.  For example, different deployments may vary wildly in terms of their purpose, services provided, and operational goals, which may render the use of individual metrics for comparisons of which is "better" meaningless.  However, comparisons to track progress over time may still make sense.  Again, combinations of metrics paint more nuanced pictures than metrics that are isolated.  </li>
         <li>Benchmarking may be a technique to result in greater comparability.  The metrics defined in this document can be used by benchmarks; however, the development of benchmarks is beyond the scope of this document.  </li>
       </ul>
    
    </section>
    <section numbered="true" toc="default">
      <name>IANA Considerations</name>
      <t>This document does not have any IANA requests. </t>
    </section>
    <section numbered="true" toc="default">
      <name>Security Considerations</name>
      <t>When instrumenting a network for energy metrics, it is important that implementations are secured to ensure that data is accurately measured and cannot be tampered with. For example, an attacker might try to tamper energy readings to confuse controller trying to minize power consumption, leading to increased power consumption instead.  In addition, access to the data needs to be secured in similar ways as for other sensitive management data, for example using secure management protocols and subjecting energy data that is maintained in YANG datastores via NACM (NETCONF Access Control Model).</t>
      <t>
However, it should be noted that this draft specifies only metrics themselves, not how to instrument networks accordingly.  For the definition of metrics themselves, security considerations do thus not really apply. </t>
    </section>
    <section numbered="true" toc="default">
      <name>Acknowledgments</name>
      <t>
We would like to thank Michael Welzl and Alexandru Petrescu for reviews and super-helpful feedback on earlier versions of the document. 
</t>
    </section>
  </middle>
  <back>
    <references>
      <name>Informative References</name>
      <reference anchor="RFC6988" target="https://datatracker.ietf.org/doc/html/rfc6988">
        <front>
          <title>
			Requirements for Energy Management
          </title>
          <author fullname="J. Quittek"> </author>
          <author fullname="M. Chandramouli"> </author>
          <author fullname="R. Winter"> </author>
          <author fullname="T. Dietz"> </author>
          <author fullname="B. Claise"> </author>
          <date month="September" year="2013"/>
        </front>
        <seriesInfo name="RFC" value="6988"/>
      </reference>
      <reference anchor="RFC7011" target="https://datatracker.ietf.org/doc/html/rfc7011">
        <front>
          <title>
			Specification of the IP Flow Information Export (IPFIX) Protocol for the Exchange of Flow Information
          </title>
          <author fullname="B. Claise (Ed.)"> </author>
          <author fullname="B. Trammell (Ed.)"> </author>
          <author fullname="P. Aitken"> </author>
          <date month="September" year="2013"/>
        </front>
        <seriesInfo name="RFC" value="7011"/>
      </reference>
      <reference anchor="RFC7012" target="https://datatracker.ietf.org/doc/html/rfc7012">
        <front>
          <title>
			Information Model for IP Flow Information Export (IPFIX)
          </title>
          <author fullname="B. Claise (Ed.)"> </author>
          <author fullname="B. Trammell (Ed.)"> </author>
          <date month="September" year="2013"/>
        </front>
        <seriesInfo name="RFC" value="7012"/>
      </reference>
      <reference anchor="RFC7950" target="https://datatracker.ietf.org/doc/html/rfc7950">
        <front>
          <title>
			The YANG 1.1 Data Modeling Language
          </title>
          <author fullname="M. Ed. Bjorklund"> </author>
          <date month="August" year="2016"/>
        </front>
        <seriesInfo name="RFC" value="7950"/>
      </reference>
      <reference anchor="RFC7460" target="https://datatracker.ietf.org/doc/html/rfc7460">
        <front>
          <title>
			Monitoring and Control MIB for Power and Energy
          </title>
          <author fullname="M. Chandramouli"> </author>
          <author fullname="B. Claise"> </author>
          <author fullname="B. Schoening"> </author>
          <author fullname="J. Quittek"> </author>
          <author fullname="T. Dietz"> </author>
          <date month="March" year="2015"/>
        </front>
        <seriesInfo name="RFC" value="7460"/>
      </reference>
      <reference anchor="RFC8402" target="https://datatracker.ietf.org/doc/html/rfc8402">
        <front>
          <title>
			Segment Routing Architecture
          </title>
          <author fullname="C. Filsfils (Ed.)"> </author>
          <author fullname="S. Previdi (Ed.)"> </author>
          <author fullname="L. Ginsberg"> </author>
          <author fullname="B. Decraene"> </author>
          <author fullname="B. Decraene"> </author>
          <author fullname="S. Litkowski"> </author>
          <author fullname="R. Shakir"> </author>
          <date month="July" year="2018"/>
        </front>
        <seriesInfo name="RFC" value="8402"/>
      </reference>
      <reference anchor="RFC8655" target="https://datatracker.ietf.org/doc/html/rfc8655">
        <front>
          <title>
			Deterministic Networking Architecture
          </title>
          <author fullname="N. Finn"> </author>
          <author fullname="P. Thubert"> </author>
          <author fullname="B. Varga"> </author>
          <author fullname="J. Farkas"> </author>
          <date month="October" year="2019"/>
        </front>
        <seriesInfo name="RFC" value="8655"/>
      </reference>
            <reference anchor="unipcc2023">
        <front>
          <title>Intergovernmental Panel on Climate Change, IPCC AR6 Synthesis Report: Climate Change 2023</title>
          <author fullname="UN"> </author>
          <date month="March" year="2023"/>
        </front>
      </reference>
      <reference anchor="telefonica2021">
        <front>
          <title>Telefonica Consolidated Annual Report 2021.</title>
          <author fullname="Telefonica"> </author>
          <date year="2021"/>
        </front>
      </reference>
      <reference anchor="I.D.draft-cwx-green-ps">
        <front>
          <title>Challenges and Opportunities in Green Networking</title>
          <author fullname="A. Clemm"> </author>
          <author fullname="C. Westphal"> </author>
          <date month="June" year="2022"/>
        </front>
      </reference>
      <reference anchor="I.D.draft-chunduri-rtgwg-preferred-path-routing" target="https://datatracker.ietf.org/doc/html/draft-chunduri-rtgwg-preferred-path-routing-01">
        <front>
          <title>Preferred Path Routing Framework</title>
          <author fullname="S. Ed. Bryant"> </author>
          <author fullname="U. Chunduri"> </author>
          <author fullname="A. Clemm "> </author>
          <date month="May" year="2022"/>
        </front>
      </reference>
      <reference anchor="I.D.draft-manral-bmwg-power-usage">
        <front>
          <title>Benchmarking Power usage of networking devices</title>
          <author fullname="V. Manral"> </author>
          <date month="Jan" year="2011"/>
        </front>
      </reference>
      <reference anchor="ATIS0600015.02">
        <front>
          <title>Energy Efficiency for Telecommunication Equipment: Methodology for Measurement and Reporting - Transport and Optical Access Requirements</title>
          <author fullname="ATIS"> </author>
          <date month="March" year="2016"/>
        </front>
      </reference>
      <reference anchor="Bolla2011" target="https://ieeexplore.ieee.org/document/5986001">
        <front>
          <title>Evaluating the energy-awareness of future Internet devices</title>
          <author fullname="R. Bolla"> </author>
          <author fullname="R. Bruschi"> </author>
          <author fullname="C. Lombardo"> </author>
          <author fullname="D. Suino"> </author>
          <date year="2011"/>
        </front>
        <seriesInfo name="DOI:" value="10.1109/HPSR.2011.5986001"/>
        <seriesInfo name="2011 IEEE 12th International Conference on High Performance Switching and Routing," value="pp. 36-43"/>
      </reference>
            <reference anchor="Shenoy2022" target="https://dl.acm.org/doi/abs/10.1145/3584024.3584025">
        <front>
          <title>Energy-Efficiency versus Carbon-Efficiency: What's the difference?</title>
          <author fullname="P. Shenoy"> </author>
          <date month="December" year="2022"/>
        </front>
        <seriesInfo name="DOI:" value="10.1145/3584024.3584025"/>
        <seriesInfo name="ACM SIGEnergy Energy Informatics Review," value="Vol 2 Issue 4"/>
      </reference>
      <reference anchor="Ahn2014" target="https://ieeexplore.ieee.org/document/6779082">
        <front>
          <title>Measurement and modeling the power consumption of router interface</title>
          <author fullname="J. Ahn"> </author>
          <author fullname="H. S. Park"> </author>
          <date year="2014"/>
        </front>
        <seriesInfo name="DOI:" value="10.1109/ICACT.2014.6779082"/>
        <seriesInfo name="16th International Conference on Advanced Communication Technology," value="pp. 860-863"/>
      </reference>
      <reference anchor="Energystar" target="https://www.energystar.gov/products/low_carbon_it_campaign/12_ways_save_energy_data_center/server_virtualization">
        <front>
          <title>12 Ways to Save Energy in the Data Center, Server Virtualization</title>
          <author fullname="EnergyStar"> </author>
          <date year="2022"/>
        </front>
      </reference>
      <reference anchor="Hossain2019" target="https://ieeexplore.ieee.org/document/6779082">
        <front>
          <title>Energy, Carbon and Renewable Energy: Candidate Metrics for Green-Aware Routing?</title>
          <author fullname="M.M. Hossain"> </author>
          <author fullname="J.-P. Georges"> </author>
          <author fullname="E. Rondeau"> </author>
          <author fullname="T. Divoux"> </author>
          <date month="June" year="2019"/>
        </front>
        <seriesInfo name="DOI:" value="10.3390/s19132901"/>
        <seriesInfo name="Sensors" value="Vol. 19 No. 3"/>
      </reference>
      <reference anchor="JuniperRouterPower">
        <front>
          <title> Power Requirements for an MX960 Router </title>
          <author fullname="Juniper"> </author>
          <date year="2021"/>
        </front>
      </reference>
      <reference anchor="Petrescu2010" target="http://dx.doi.org/10.13140/RG.2.1.4665.5209">
        <front>
          <title>Energy Metric for IPv6 Links</title>
          <author fullname="A. Petrescu"> </author>
          <author fullname="C. Janneteau"> </author>
          <author fullname="A. Olivereau"> </author>
          <author fullname="M. Kellil"> </author>
          <date month="March" year="2010"/>
        </front>
        <seriesInfo name="DOI:" value="10.13140/RG.2.1.4665.5209"/>
      </reference>
      <reference anchor="Raghavan2011" target="https://dl.acm.org/doi/10.1145/2070562.2070571">
        <front>
          <title>The energy and emergy of the Internet </title>
          <author fullname="B. Raghavan"> </author>
          <author fullname="J. Ma"> </author>
          <date year="2011"/>
        </front>
        <seriesInfo name="HotNets-X: Proceedings of the 10th ACM Workshop on Hot Topics in Networks," value="pp. 1-6"/>
      </reference>
      
      <reference anchor="vmWare2022" target="https://docs.vmware.com/en/vRealize-Operations/8.6/vrealize-operations-86-reference-guide.pdf">
        <front>
          <title>Definition for Metrics, Properties, and Alerts - vRealize Operations 8.6 (pp.308ff)</title>
          <author fullname="vmWare"> </author>
          <date month="May" year="2022"/>
        </front>
      </reference>
      
      
      <reference anchor="ETSI203228">
      <front>
      <title>ES 203 228: Assessment of mobile network energy efficiency</title>
      <author fullname="ETSI"> </author>
      <date month="October" year="2020"/>
      </front>
      </reference>
      
      <reference anchor="ETSI202706-1">
      <front>
      <title>ES 202 706-1: Metrics and measurement method for energy efficiency of wireless access network equipment; Part 1: Power consumption - static measurement method</title>
      <author fullname="ETSI"> </author>
      <date month="August" year="2022"/>
      </front>
      </reference>
      
      <reference anchor="ETSI202706-2">
      <front>
      <title>TS 102 706-2: Metrics and measurement method for energy efficiency of wireless access network equipment; Part 2: Power consumption - dynamic measurement method</title>
      <author fullname="ETSI"> </author>
      <date month="November" year="2018"/>
      </front>
      </reference>
      
      <reference anchor="ETSI303215">
      <front>
      <title>EN 303 215: Measurement methods and limits for power consumption in broadband telecommunication networks equipment</title>
      <author fullname="ETSI"> </author>
      <date month="December" year="2014"/>
      </front>
      </reference>
      
      <reference anchor="ETSI203184">
      <front>
      <title>ES 203 184: Measurement Methods for Power Consumption in Transport Telecommunication Networks Equipment</title>
      <author fullname="ETSI"> </author>
      <date month="December" year="2012"/>
      </front>
      </reference>
      
      <reference anchor="ETSI203136">
      <front>
      <title>ES 203 136: Measurement methods for energy efficiency of router and switch equipment</title>
      <author fullname="ETSI"> </author>
      <date month="August" year="2017"/>
      </front>
      </reference>

      
    </references>
  </back>
</rfc>
